{
  "openapi": "3.0.0",
  "info": {
    "title": "Spajzka API",
    "version": "1.0.0",
    "description": "Spajzka API documentation with Swagger",
    "contact": {
      "name": "API Support"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "http://spajzka.vazac.dev",
      "description": "Production server"
    }
  ],
  "components": {
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Error message"
          },
          "code": {
            "type": "string",
            "description": "Error code"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "User ID"
          },
          "name": {
            "type": "string",
            "description": "User's full name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address"
          },
          "isAnonymous": {
            "type": "boolean",
            "description": "Whether the user is an anonymous user"
          },
          "globalPermissions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array of global permissions the user has"
          },
          "groupPermissions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array of all permissions from all groups the user is a member of"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account creation timestamp"
          }
        }
      },
      "RegisterRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "User's full name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address"
          },
          "password": {
            "type": "string",
            "format": "password",
            "description": "User's password (min 6 characters)"
          }
        },
        "required": [
          "name",
          "email",
          "password"
        ]
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "format": "password"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "JWT authentication token"
          },
          "user": {
            "$ref": "#/components/schemas/User"
          }
        }
      },
      "UpdateProfileRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "ChangePasswordRequest": {
        "type": "object",
        "properties": {
          "oldPassword": {
            "type": "string",
            "format": "password"
          },
          "newPassword": {
            "type": "string",
            "format": "password"
          }
        },
        "required": [
          "oldPassword",
          "newPassword"
        ]
      },
      "Group": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Group ID"
          },
          "name": {
            "type": "string",
            "description": "Group name"
          },
          "isPersonal": {
            "type": "boolean",
            "description": "Whether this is a personal group"
          },
          "members": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "userId": {
                  "type": "string"
                },
                "role": {
                  "type": "string",
                  "enum": [
                    "admin",
                    "moderator",
                    "member"
                  ]
                }
              }
            },
            "description": "Array of members with their roles"
          },
          "inviteCode": {
            "type": "string",
            "description": "Invite code for joining group"
          },
          "inviteEnabled": {
            "type": "boolean",
            "description": "Whether invite is enabled"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "name"
        ]
      },
      "CreateGroupRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Group name"
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateGroupRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Group name"
          }
        }
      },
      "JoinGroupRequest": {
        "type": "object",
        "properties": {
          "inviteCode": {
            "type": "string",
            "description": "Invite code to join group"
          }
        },
        "required": [
          "inviteCode"
        ]
      },
      "GroupMember": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "moderator",
              "member"
            ]
          }
        }
      },
      "AssignRoleRequest": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "moderator",
              "member"
            ]
          }
        },
        "required": [
          "role"
        ]
      },
      "GlobalItem": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Item ID"
          },
          "name": {
            "type": "string",
            "description": "Item name"
          },
          "category": {
            "type": "string",
            "description": "Item category"
          },
          "icon": {
            "type": "string",
            "description": "Emoji icon"
          },
          "defaultUnit": {
            "type": "string",
            "description": "Default unit of measurement"
          },
          "barcode": {
            "type": "string",
            "description": "Barcode"
          },
          "searchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional names for search"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether item is active"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs associated with this item"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "name",
          "category"
        ]
      },
      "GroupItem": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Item ID"
          },
          "groupId": {
            "type": "string",
            "description": "Group ID this item belongs to"
          },
          "name": {
            "type": "string",
            "description": "Item name"
          },
          "category": {
            "type": "string",
            "description": "Item category"
          },
          "icon": {
            "type": "string",
            "description": "Emoji icon"
          },
          "defaultUnit": {
            "type": "string",
            "description": "Default unit of measurement"
          },
          "barcode": {
            "type": "string",
            "description": "Barcode"
          },
          "searchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional names for search"
          },
          "createdBy": {
            "type": "string",
            "description": "User ID who created this item"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs associated with this item"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "name",
          "category",
          "groupId"
        ]
      },
      "CreateGlobalItemRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "defaultUnit": {
            "type": "string"
          },
          "barcode": {
            "type": "string"
          },
          "searchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional names for search"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs to associate with this item"
          }
        },
        "required": [
          "name",
          "category"
        ]
      },
      "CreateGroupItemRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "defaultUnit": {
            "type": "string"
          },
          "barcode": {
            "type": "string"
          },
          "searchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional names for search"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs to associate with this item"
          }
        },
        "required": [
          "name",
          "category"
        ]
      },
      "PantryItem": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "groupId": {
            "type": "string"
          },
          "itemId": {
            "type": "string"
          },
          "itemType": {
            "type": "string",
            "enum": [
              "global",
              "group"
            ]
          },
          "quantity": {
            "type": "number"
          },
          "name": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "defaultUnit": {
            "type": "string"
          },
          "barcode": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreatePantryItemRequest": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string"
          },
          "itemType": {
            "type": "string",
            "enum": [
              "global",
              "group"
            ]
          },
          "quantity": {
            "type": "number"
          }
        },
        "required": [
          "itemId",
          "itemType",
          "quantity"
        ]
      },
      "RecipeIngredient": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string",
            "description": "Item ID reference (optional)"
          },
          "itemName": {
            "type": "string",
            "description": "Name of the ingredient"
          },
          "quantity": {
            "type": "number",
            "description": "Quantity of ingredient"
          },
          "unit": {
            "type": "string",
            "description": "Unit of measurement"
          }
        },
        "required": [
          "itemName",
          "quantity",
          "unit"
        ]
      },
      "GlobalRecipe": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Recipe ID"
          },
          "name": {
            "type": "string",
            "description": "Recipe name"
          },
          "description": {
            "type": "string",
            "description": "Recipe description"
          },
          "icon": {
            "type": "string",
            "description": "Emoji icon"
          },
          "recipeType": {
            "type": "string",
            "enum": [
              "global"
            ],
            "description": "Recipe type"
          },
          "userId": {
            "type": "string",
            "description": "User ID who created this recipe"
          },
          "servings": {
            "type": "number",
            "description": "Number of servings"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RecipeIngredient"
            }
          },
          "instructions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Step-by-step instructions"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs associated with this recipe"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "name",
          "recipeType",
          "userId",
          "servings",
          "ingredients",
          "instructions"
        ]
      },
      "GroupRecipe": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Recipe ID"
          },
          "name": {
            "type": "string",
            "description": "Recipe name"
          },
          "description": {
            "type": "string",
            "description": "Recipe description"
          },
          "icon": {
            "type": "string",
            "description": "Emoji icon"
          },
          "recipeType": {
            "type": "string",
            "enum": [
              "group"
            ],
            "description": "Recipe type"
          },
          "groupId": {
            "type": "string",
            "description": "Group ID this recipe belongs to"
          },
          "userId": {
            "type": "string",
            "description": "User ID who created this recipe"
          },
          "servings": {
            "type": "number",
            "description": "Number of servings"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RecipeIngredient"
            }
          },
          "instructions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Step-by-step instructions"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs associated with this recipe"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "name",
          "recipeType",
          "groupId",
          "userId",
          "servings",
          "ingredients",
          "instructions"
        ]
      },
      "CreateGlobalRecipeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "servings": {
            "type": "number"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RecipeIngredient"
            }
          },
          "instructions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs to associate with this recipe"
          }
        },
        "required": [
          "name",
          "servings",
          "ingredients",
          "instructions"
        ]
      },
      "CreateGroupRecipeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "servings": {
            "type": "number"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RecipeIngredient"
            }
          },
          "instructions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tag IDs to associate with this recipe"
          }
        },
        "required": [
          "name",
          "servings",
          "ingredients",
          "instructions"
        ]
      },
      "Role": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Role ID"
          },
          "name": {
            "type": "string",
            "description": "Role display name"
          },
          "description": {
            "type": "string",
            "description": "Role description"
          },
          "isGlobal": {
            "type": "boolean",
            "description": "Whether this is a global role or group role"
          },
          "permissions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array of permissions for this role"
          }
        }
      },
      "ShoppingItem": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "groupId": {
            "type": "string"
          },
          "itemId": {
            "type": "string"
          },
          "itemType": {
            "type": "string",
            "enum": [
              "global",
              "group"
            ]
          },
          "quantity": {
            "type": "number"
          },
          "completed": {
            "type": "boolean"
          },
          "name": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "defaultUnit": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateShoppingItemRequest": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string"
          },
          "itemType": {
            "type": "string",
            "enum": [
              "global",
              "group"
            ]
          },
          "quantity": {
            "type": "number"
          }
        },
        "required": [
          "itemId",
          "itemType"
        ]
      },
      "Tag": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Tag ID"
          },
          "userId": {
            "type": "string",
            "description": "User ID who owns this tag"
          },
          "name": {
            "type": "string",
            "description": "Tag name"
          },
          "color": {
            "type": "string",
            "description": "Tag color (hex code)"
          },
          "icon": {
            "type": "string",
            "description": "Optional emoji icon"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "name",
          "userId"
        ]
      },
      "CreateTagRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "color": {
            "type": "string",
            "description": "Tag color (hex code)"
          },
          "icon": {
            "type": "string",
            "description": "Optional emoji icon"
          }
        },
        "required": [
          "name"
        ]
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "paths": {
    "/api/auth/anonymous": {
      "post": {
        "summary": "Create anonymous user",
        "description": "Create a temporary anonymous user for using the app without registration",
        "tags": [
          "Authentication"
        ],
        "responses": {
          "201": {
            "description": "Anonymous user created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "summary": "Register a new user",
        "description": "Create a new user account",
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - validation error"
          },
          "409": {
            "description": "Email already exists"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "Login",
        "description": "Authenticate user and get JWT token",
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "summary": "Get current user",
        "description": "Get the currently authenticated user's information",
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "summary": "Logout",
        "description": "Logout user (client should remove token)",
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Logout successful"
          }
        }
      }
    },
    "/api/auth/profile": {
      "put": {
        "summary": "Update profile",
        "description": "Update user's name and/or email",
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "409": {
            "description": "Email already exists"
          }
        }
      }
    },
    "/api/auth/change-password": {
      "post": {
        "summary": "Change password",
        "description": "Change user's password",
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed successfully"
          },
          "401": {
            "description": "Invalid old password"
          }
        }
      }
    },
    "/api/auth/active-group": {
      "post": {
        "summary": "Set active group",
        "description": "Set the user's active group for viewing pantry/shopping lists",
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "groupId": {
                    "type": "string"
                  }
                },
                "required": [
                  "groupId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Active group updated"
          },
          "403": {
            "description": "User is not a member of this group"
          }
        }
      }
    },
    "/api/groups": {
      "post": {
        "summary": "Create a new group",
        "description": "Create a new shared group with the authenticated user as admin",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          }
        }
      }
    },
    "/api/groups/my": {
      "get": {
        "summary": "Get user's groups",
        "description": "Get all groups that the authenticated user is a member of",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User's groups",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Group"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/groups/{id}": {
      "get": {
        "summary": "Get group by ID",
        "description": "Get a specific group (user must be a member)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Group details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "403": {
            "description": "User is not a member of this group"
          },
          "404": {
            "description": "Group not found"
          }
        }
      },
      "put": {
        "summary": "Update group",
        "description": "Update group details (requires group:update permission)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateGroupRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete group",
        "description": "Delete a group (requires group:delete permission)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Group deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/groups/join": {
      "post": {
        "summary": "Join a group",
        "description": "Join a group using an invite code",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JoinGroupRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully joined group",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "400": {
            "description": "Invalid invite code or user already in group"
          }
        }
      }
    },
    "/api/groups/{id}/leave": {
      "post": {
        "summary": "Leave a group",
        "description": "Leave a group (admin cannot leave if there are other members)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully left group"
          },
          "400": {
            "description": "Admin cannot leave group with other members"
          }
        }
      }
    },
    "/api/groups/{id}/members": {
      "get": {
        "summary": "Get group members",
        "description": "Get all members of a group with their details",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of group members",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GroupMember"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/groups/{id}/kick/{userId}": {
      "delete": {
        "summary": "Kick user from group",
        "description": "Remove a user from the group (requires group:manage_members permission)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User kicked successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/groups/{id}/members/{userId}/role": {
      "put": {
        "summary": "Assign role to member",
        "description": "Change a member's role (requires group:manage_roles permission)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role assigned successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/groups/{id}/regenerate-invite": {
      "post": {
        "summary": "Regenerate invite code",
        "description": "Generate a new invite code for the group (requires group:update permission)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Invite code regenerated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "inviteCode": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/groups/{id}/toggle-invite": {
      "post": {
        "summary": "Toggle invite enabled/disabled",
        "description": "Enable or disable invites for the group (requires group:update permission)",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean"
                  }
                },
                "required": [
                  "enabled"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invite status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "inviteEnabled": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health check endpoint",
        "description": "Returns the health status of the API and database connection",
        "tags": [
          "Health"
        ],
        "responses": {
          "200": {
            "description": "API is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "database": {
                      "type": "string",
                      "example": "connected"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/items": {
      "get": {
        "summary": "Get all items",
        "description": "Get both global items and group items for user's group",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Combined list of items",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "globalItems": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/GlobalItem"
                      }
                    },
                    "groupItems": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/GroupItem"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/items/global": {
      "get": {
        "summary": "Get all global items",
        "description": "Get all active global items",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of global items",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GlobalItem"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create global item",
        "description": "Create a new global item (requires global_items:create permission)",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGlobalItemRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Global item created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GlobalItem"
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/items/global/{id}": {
      "put": {
        "summary": "Update global item",
        "description": "Update a global item (requires global_items:update permission)",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGlobalItemRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Global item updated"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete global item",
        "description": "Deactivate a global item (requires global_items:delete permission)",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Global item deleted"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/items/group": {
      "get": {
        "summary": "Get group items",
        "description": "Get all items for user's group",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of group items",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GroupItem"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create group item",
        "description": "Create a new group-specific item (requires group_items:create permission)",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupItemRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group item created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupItem"
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/items/group/{id}": {
      "put": {
        "summary": "Update group item",
        "description": "Update a group item (requires group_items:update permission)",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupItemRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group item updated"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete group item",
        "description": "Delete a group item (requires group_items:delete permission)",
        "tags": [
          "Items"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Group item deleted"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/pantry": {
      "get": {
        "summary": "Get all pantry items",
        "description": "Retrieve all pantry items for the authenticated user's group",
        "tags": [
          "Pantry"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "A list of pantry items",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PantryItem"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create pantry item",
        "description": "Add a new item to the pantry (requires pantry:create permission)",
        "tags": [
          "Pantry"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePantryItemRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Item created"
          }
        }
      }
    },
    "/api/pantry/{id}": {
      "put": {
        "summary": "Update pantry item",
        "description": "Update an existing pantry item (requires pantry:update permission)",
        "tags": [
          "Pantry"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "quantity": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item updated"
          }
        }
      },
      "delete": {
        "summary": "Delete pantry item",
        "description": "Delete a pantry item (requires pantry:delete permission)",
        "tags": [
          "Pantry"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Item deleted"
          }
        }
      }
    },
    "/api/recipes": {
      "get": {
        "summary": "Get all recipes",
        "description": "Get both global recipes and group recipes for user's group",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Combined list of recipes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "globalRecipes": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/GlobalRecipe"
                      }
                    },
                    "groupRecipes": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/GroupRecipe"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/recipes/global": {
      "get": {
        "summary": "Get global recipes",
        "description": "Get all global recipes (requires global_recipes:create permission)",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of global recipes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GlobalRecipe"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create global recipe",
        "description": "Create a new global recipe (requires global_recipes:create permission)",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGlobalRecipeRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Global recipe created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GlobalRecipe"
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/recipes/global/{id}": {
      "put": {
        "summary": "Update global recipe",
        "description": "Update a global recipe (requires global_recipes:update permission)",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGlobalRecipeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Global recipe updated"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete global recipe",
        "description": "Delete a global recipe (requires global_recipes:delete permission)",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Global recipe deleted"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/recipes/group": {
      "get": {
        "summary": "Get group recipes",
        "description": "Get all recipes for user's active group",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of group recipes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GroupRecipe"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create group recipe",
        "description": "Create a new group-shared recipe (requires group_recipes:create permission)",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupRecipeRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group recipe created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupRecipe"
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/recipes/group/{id}": {
      "put": {
        "summary": "Update group recipe",
        "description": "Update a group recipe (requires group_recipes:update permission)",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupRecipeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group recipe updated"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete group recipe",
        "description": "Delete a group recipe (requires group_recipes:delete permission)",
        "tags": [
          "Recipes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Group recipe deleted"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/roles": {
      "get": {
        "summary": "Get all roles",
        "description": "Retrieve all available roles with their permissions",
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of roles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Role"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/roles/{id}": {
      "get": {
        "summary": "Get role by ID",
        "description": "Retrieve a specific role with its permissions",
        "tags": [
          "Roles"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Role ID (e.g., admin, moderator, member, system_moderator)"
          }
        ],
        "responses": {
          "200": {
            "description": "Role details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Role"
                }
              }
            }
          },
          "404": {
            "description": "Role not found"
          }
        }
      }
    },
    "/api/shopping": {
      "get": {
        "summary": "Get all shopping items",
        "description": "Retrieve all shopping list items for the authenticated user's group",
        "tags": [
          "Shopping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "A list of shopping items",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ShoppingItem"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create shopping item",
        "description": "Add a new item to the shopping list (requires shopping:create permission)",
        "tags": [
          "Shopping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateShoppingItemRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Item created"
          }
        }
      }
    },
    "/api/shopping/{id}": {
      "put": {
        "summary": "Update shopping item",
        "description": "Update an existing shopping item (requires shopping:update permission)",
        "tags": [
          "Shopping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "quantity": {
                    "type": "number"
                  },
                  "completed": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item updated"
          }
        }
      },
      "delete": {
        "summary": "Delete shopping item",
        "description": "Delete a shopping item (requires shopping:delete permission)",
        "tags": [
          "Shopping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Item deleted"
          }
        }
      }
    },
    "/api/tags": {
      "get": {
        "summary": "Get user tags",
        "description": "Get all tags for the authenticated user",
        "tags": [
          "Tags"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of user tags",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Tag"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create tag",
        "description": "Create a new user tag",
        "tags": [
          "Tags"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTagRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tag created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Tag"
                }
              }
            }
          }
        }
      }
    },
    "/api/tags/{id}": {
      "put": {
        "summary": "Update tag",
        "description": "Update a user tag",
        "tags": [
          "Tags"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTagRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag updated"
          }
        }
      },
      "delete": {
        "summary": "Delete tag",
        "description": "Delete a user tag",
        "tags": [
          "Tags"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Tag deleted"
          }
        }
      }
    }
  },
  "tags": []
}